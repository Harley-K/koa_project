(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03397b70"],{c646:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"main-container"}},[a("el-container",[a("el-header",[a("div",{attrs:{id:"main-title"}},[a("span",[t._v(t._s(t.$route.meta.title))])])]),t._v(" "),a("el-main",[a("div",{attrs:{id:"main-filter"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.filterTableData}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{clearable:"",size:"medium",placeholder:""},on:{clear:t.clarFilter},model:{value:t.filterTableData.orgname,callback:function(e){t.$set(t.filterTableData,"orgname",e)},expression:"filterTableData.orgname"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.searchFilterTableData}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.$router.push("/add/scaleplat_org")}}},[t._v("添加机构")])],1)],1)],1),t._v(" "),a("div",{attrs:{id:"main-table"}},[a("el-table",{attrs:{"header-row-class-name":"tableTitleStyle",data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"ID",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orgname",label:"机构名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orgperson",label:"法人代表",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addr",label:"详细地址",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_active",align:"center",label:"状态","min-width":"140px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用"},on:{change:function(a){return t.changeSwitch(e.row)}},model:{value:e.row.is_active,callback:function(a){t.$set(e.row,"is_active",a)},expression:"scope.row.is_active"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(a){return t.$router.push("/detail/scaleplat_org/"+e.row.id)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(a){return t.$router.push("/editor/scaleplat_org/"+e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(a){return t.openDialog(e.row)}}},[t._v("分配量表")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogDate.title,visible:t.centerDialogVisible,width:"650px",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{attrs:{id:"org-transfer"}},[a("el-transfer",{attrs:{filterable:"",data:t.dialogDate.all_data,props:{key:"id",label:"name"}},on:{"left-check-change":t.leftCheck,"right-check-change":t.rightCheck,change:t.changeEven},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])],1),t._v(" "),a("el-footer",[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"pager-count":10,small:!1,"current-page":t.filterTableData.page},on:{"update:currentPage":function(e){return t.$set(t.filterTableData,"page",e)},"update:current-page":function(e){return t.$set(t.filterTableData,"page",e)},"current-change":t.pageSizeChange}})],1)],1)],1)},i=[],l=(a("ac6a"),a("5df3"),a("fdc9")),r={name:"ScaleplatScale",data:function(){return{filterTableData:{orgname:"",page:1},tableData:[],loading:!0,total:1,centerDialogVisible:!1,dialogDate:{title:"",all_data:[],left_data:[],right_data:[],id:""},value:[],clickValueLeft:[],clickValueRight:[]}},created:function(){this.init()},methods:{init:function(){var t=this;this.loading=!0,Promise.all([Object(l["d"])(this.filterTableData)]).then((function(e){t.tableData=e[0].results,t.total=e[0].count})).then((function(){t.loading=!1}))},searchFilterTableData:function(){var t=this;this.loading=!0,this.filterTableData.page=1,Object(l["d"])(this.filterTableData).then((function(e){t.tableData=e.results,t.filterTableData.page=e.num_pages,t.total=e.count})).then((function(){t.loading=!1}))},clarFilter:function(){this.searchFilterTableData()},changeSwitch:function(t){this.$confirm("此操作将".concat(!0===t.is_active?"启用":"禁用","量表, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["a"])({orgid:t.id,action:t.is_active?"active":"deactive"})})).catch((function(){t.is_active=!t.is_active}))},openDialog:function(t){var e=this;this.value=[],Object(l["c"])({orgid:t.id}).then((function(a){e.dialogDate.title=t.orgname+"  (量表分配)",e.dialogDate.all_data=a.notinscales.concat(a.inscales),e.dialogDate.id=t.id,a.inscales.forEach((function(t,a){e.value.push(t.id)})),e.centerDialogVisible=!0,e.$nextTick((function(){var t=document.getElementById("org-transfer").getElementsByClassName("el-transfer-panel__header");t[0].innerHTML='<span style="cursor: pointer;">未分配</span>',t[1].innerHTML='<span style="cursor: pointer;">已分配</span>'}))}))},changeEven:function(t,e){var a=this;"left"===e?this.$confirm("点击确认取消量表分配, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["f"])({orgid:a.dialogDate.id,scaleids:a.clickValueRight,action:"moveout"})})).catch((function(){a.value=a._.uniq(a.value.concat(a.clickValueRight))})):this.$confirm("点击确认分配量表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["f"])({orgid:a.dialogDate.id,scaleids:a.clickValueLeft,action:"movein"})})).catch((function(){a.value=a._.difference(a.value,a.clickValueLeft)}))},leftCheck:function(t){this.clickValueLeft=t},rightCheck:function(t){this.clickValueRight=t},pageSizeChange:function(t){this.filterTableData.page=t,this.init()}}},c=r,o=a("2877"),u=Object(o["a"])(c,n,i,!1,null,null,null);e["default"]=u.exports},fdc9:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return c})),a.d(e,"g",(function(){return o})),a.d(e,"c",(function(){return u})),a.d(e,"f",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"/organizations/",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/org/orgchangestate/",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/organizations/".concat(t,"/"),method:"get"})}function c(t){return Object(n["a"])({url:"/organizations/",method:"post",data:t})}function o(t,e){return Object(n["a"])({url:"/organizations/".concat(t,"/"),method:"put",data:e})}function u(t){return Object(n["a"])({url:"org/orgscale/",method:"get",params:t})}function s(t){return Object(n["a"])({url:"org/orgscale/",method:"post",data:t})}}}]);